# Backend configuration

# Backend name to identify the backend.
backend_name = "backend-dev"

# Backend host to bind to.
http_host = "127.0.0.1"

# Backend port.
http_port = 8080

# Shared secret between a trusted client and the backend, that must be present
# in the `x-reacher-secret` header of all incoming requests.
# header_secret = "my-secret"

# The name to use during the EHLO/HELO command in the SMTP conversation.
# Ideally, this should match the reverse DNS of the IP address of the server.
hello_name = "reacher"

# The email to use during the MAIL FROM command in the SMTP conversation.
# Ideally, the domain of this email should match the "hello_name" above.
from_email = "reacher@gmail.com"

# The address of the Chrome WebDriver server to use for making headless email
# verifications.
webdriver_addr = "http://localhost:9515"

[worker]
enable = true

# Fields below are only used if the worker is enabled.

# Throttle the maximum number of requests per second, per minute, per hour, an
# per day for this worker.
# All fields are optional, comment them out to disable the limit.
#
# Important: these throttle configurations only apply to bulk verification, and
# not to the single /v0/check_email endpoint. The latter endpoint always
# executes the verification immediately, regardless of the throttle settings.
[worker.throttle]
# max_requests_per_second = 20
# max_requests_per_minute = 100
# max_requests_per_hour = 1000
max_requests_per_day = 20000

# RabbitMQ configuration.
[worker.rabbitmq]
url = "amqp://guest:guest@localhost:5672"
# Queue name to consume messages from.
#
# The queue name MUST be one of the following:
# - "check.Smtp.gmail": verifies any Gmail email, using SMTP.
# - "check.Smtp.yahoo": verifies any Yahoo email, using SMTP.
# - "check.Smtp.hotmail.b2b": verifies any B2B Hotmail email, using SMTP.
# - "check.Smtp.hotmail.b2c": verifies any B2C Hotmail email (@outlook, @live, @hotmail), using SMTP.
# - "check.Smtp.hotmail.*": verifies any Hotmail email, using SMTP.
# - "check.Smtp.*": verifies any email, using SMTP.
# - "check.Headless.yahoo": verifies any Yahoo email, using a headless browser.
# - "check.Headless.hotmail.b2c": verifies any B2C Hotmail email (@outlook, @live, @hotmail) email, using a headless browser.
# - "check.Headless.*": verifies any email, using a headless browser.
# - "check.*": verifies any email, using the default method.
queue = "check.*"
# Number of concurrent emails to verify for this worker.
concurrency = 20

# Postgres configuration. Currently, we require a Postgres database to store
# the results of the verifications. This might change in the future, where the
# storage can be pluggable.
[worker.postgres]
db_url = "postgresql://localhost/reacherdb"

# The optional webhook URL to send the results to. This will one POST request
# per email verification, with the result in the body.
# [worker.webhook]
# url = "http://localhost:8080/webhook"
